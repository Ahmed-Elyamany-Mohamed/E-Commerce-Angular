import{$ as Je,A as N,B as M,C as y,D as p,E as g,F as pe,G as Ve,H as o,I as x,J as u,K as Fe,L as Ae,M as He,N as A,O as H,P as je,Q as L,R as w,S as Re,T as Ue,U as qe,V as J,W as _,X as $e,Y as P,Z as Ge,_ as Ye,a as me,aa as O,b as ce,ba as E,c as $,ca as Be,d as le,e as Oe,ea as I,f as De,fa as B,g as Ne,ga as Q,h as D,ha as S,ia as z,j as T,ja as W,k as Me,ka as ue,l as h,la as U,m as C,ma as K,n as Le,o as G,oa as Z,p as s,pa as X,q as l,qa as ee,r as b,ra as Qe,sa as te,t as d,u as c,v as Y,w as de,x as r,y as i,z as f}from"./chunk-I4R4RMMV.js";var k=class n{constructor(t){this.http=t}cartChanged=new le(void 0);getCartKey(){let t=localStorage.getItem("user");return`cart_${t?JSON.parse(t).id:"guest"}`}getCart(){let t=localStorage.getItem(this.getCartKey());try{let e=JSON.parse(t||"[]");return Array.isArray(e)?e:[]}catch{return[]}}addToCart(t,e=1){let a=this.getCart(),m=a.find(v=>v.id===t.id);m?m.quantity+=e:a.push(ce(me({},t),{quantity:e})),this.saveCart(a)}updateQuantity(t,e){let a=this.getCart(),m=a.find(v=>v.id===t);if(m){if(e<=0){this.removeFromCart(t);return}m.quantity=e,this.saveCart(a)}}removeFromCart(t){let e=this.getCart().filter(a=>a.id!==t);this.saveCart(e)}saveCart(t){localStorage.setItem(this.getCartKey(),JSON.stringify(t)),this.cartChanged.next()}getUserCart(t){return this.http.get(`${I.baseUrl}/cart?userId=${t}`)}createCart(t,e){return this.http.post(`${I.baseUrl}/cart`,{userId:t,items:e})}updateCart(t,e){return this.http.patch(`${I.baseUrl}/cart/${t}`,{items:e})}removeCart(t){return this.http.delete(`${I.baseUrl}/cart/${t}`)}static \u0275fac=function(e){return new(e||n)(T(P))};static \u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})};var tt=n=>["/product",n];function it(n,t){if(n&1&&(r(0,"div",10),o(1),i()),n&2){let e=g();s(),u(" ",e.notFound," ")}}function rt(n,t){if(n&1){let e=y();r(0,"div",11)(1,"div",12),f(2,"img",13),r(3,"div",14)(4,"h5",15),o(5),i(),r(6,"p",16),o(7),i(),r(8,"p",17),o(9),A(10,"currency"),i(),r(11,"button",18),o(12," View Details "),i(),r(13,"button",19),p("click",function(){let m=h(e).$implicit,v=g();return C(v.addToCart(m))}),o(14," Add To Cart "),i()()()()}if(n&2){let e=t.$implicit;s(2),pe("alt",e.productName),c("src",e.img,G),s(3),x(e.productName),s(2),x(e.description),s(2),u(" Price: ",H(10,6,e.productPrice,"EGP")," "),s(2),c("routerLink",He(9,tt,e.id))}}var fe=class n{constructor(t,e){this.productService=t;this.cartService=e}products=[];showToast=!1;toastMessage="";notFound="No results found. Try a different search.";ngOnInit(){this.productService.searchResult$.subscribe(t=>{this.products=t}),this.loadProducts()}loadProducts(){this.productService.getProducts().subscribe(t=>{this.products=t})}addToCart(t){this.cartService.addToCart(t,1),this.showToastMessage.bind(this)}showToastMessage(t){this.toastMessage=t,this.showToast=!0,setTimeout(()=>{this.showToast=!1},4e3)}hideToast(){this.showToast=!1}static \u0275fac=function(e){return new(e||n)(l(B),l(k))};static \u0275cmp=b({type:n,selectors:[["app-home"]],decls:12,vars:7,consts:[[1,"container","mt-5"],[1,"text-center","mb-4"],["class","alert alert-warning text-center",4,"ngIf"],[1,"row"],["class","col-md-4 mb-4",4,"ngFor","ngForOf"],[1,"toast-container","position-fixed","bottom-0","start-50","translate-middle-x","p-3",2,"z-index","9999"],["role","alert",1,"toast","align-items-center","text-white","bg-danger","border-0","fs-5","show",2,"transition","opacity 0.4s ease-in-out"],[1,"d-flex"],[1,"toast-body"],["type","button",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"],[1,"alert","alert-warning","text-center"],[1,"col-md-4","mb-4"],[1,"card","h-100"],[1,"card-img-top",2,"height","200px","object-fit","cover",3,"src","alt"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"card-text","fw-bold"],["routerLinkActive","router-link-active",1,"btn","btn-outline-primary","mx-2",3,"routerLink"],[1,"btn","btn-outline-primary","mx-2",3,"click"]],template:function(e,a){e&1&&(r(0,"div",0)(1,"h2",1),o(2,"Our Products"),i(),d(3,it,2,1,"div",2),r(4,"div",3),d(5,rt,15,11,"div",4),r(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),o(10),i(),r(11,"button",9),p("click",function(){return a.hideToast()}),i()()()()()()),e&2&&(s(3),c("ngIf",a.products.length===0),s(2),c("ngForOf",a.products),s(2),Y("show",a.showToast)("hide",!a.showToast),s(3),u(" ",a.toastMessage," "))},dependencies:[_,L,w,J,E],styles:[".card[_ngcontent-%COMP%]{transition:transform .3s}.card[_ngcontent-%COMP%]:hover{transform:scale(1.03)}.product-carousel[_ngcontent-%COMP%]{max-width:800px;margin:40px auto;border-radius:12px;overflow:hidden;box-shadow:0 8px 20px #00000026}.carousel-image-wrapper[_ngcontent-%COMP%]{height:100px;overflow:hidden}.carousel-img[_ngcontent-%COMP%]{object-fit:contain;height:100%;width:100%;transition:transform .3s ease-in-out}.carousel-item[_ngcontent-%COMP%]:hover   .carousel-img[_ngcontent-%COMP%]{transform:scale(1.03)}.carousel-caption[_ngcontent-%COMP%]{bottom:10px;background:#00000080;padding:15px;border-radius:10px}.carousel-indicators[_ngcontent-%COMP%]   [data-bs-target][_ngcontent-%COMP%]{background-color:#fff}.carousel-control-prev-icon[_ngcontent-%COMP%], .carousel-control-next-icon[_ngcontent-%COMP%]{filter:invert(1)}.search-result[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;max-height:400px;overflow-y:auto;background:#fff;z-index:999;box-shadow:0 4px 12px #0000001a}.search-card[_ngcontent-%COMP%]{padding:10px;display:flex;align-items:center;gap:15px;border-bottom:1px solid #eee}.search-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover}"]})};var re=class n{constructor(t,e){this.http=t;this.router=e}isSellerLoggedIn=new le(!1);isLoginError=new Le(!1);logIn(t){return $(this,null,function*(){try{return(yield this.http.get(`${I.baseUrl}/admin?email=${t.email}&password=${t.password}`).toPromise())||[]}catch(e){return console.error("Admin login failed:",e),[]}})}reLoadSeller(){localStorage.getItem("admin")&&(this.isSellerLoggedIn.next(!0),this.router.navigate(["/dashboard"]))}static \u0275fac=function(e){return new(e||n)(T(P),T(O))};static \u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})};var V=class n{constructor(t,e){this.http=t;this.router=e}isUserLoggedIn=!1;isLoading=!1;showToast=!1;proceedToCheckout(){if(!this.isUserLoggedIn){alert("Please log in to checkout."),this.router.navigate(["/login"]);return}this.router.navigate(["/checkout"])}logIn(t){return $(this,null,function*(){try{return(yield this.http.get(`${I.baseUrl}/users?email=${t.email}&password=${t.password}`).toPromise())||[]}catch(e){return console.error("User login failed:",e),[]}})}signUp(t,e){this.http.post(`${I.baseUrl}/users`,t).subscribe({next:a=>{localStorage.setItem("user",JSON.stringify(a)),e("\u2705 Account created successfully!"),this.router.navigate(["/login"])},error:()=>{e("\u274C Signup failed. Please try again.")}})}static \u0275fac=function(e){return new(e||n)(T(P),T(O))};static \u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})};function nt(n,t){n&1&&(N(0),r(1,"div",12),o(2," This email is already taken. "),i(),M())}function ot(n,t){n&1&&(r(0,"div",12),o(1," Check Your Inputs All Field is Required "),i())}function at(n,t){n&1&&(r(0,"div",21)(1,"div",22)(2,"span",23),o(3,"Sending..."),i()()())}var ve=class n{constructor(t,e,a,m){this.sellerService=t;this.router=e;this.userService=a;this.cartService=m;this.initFormControl(),this.createForm()}myForm;email;password;submitted=!1;isLoading=!1;showToast=!1;toastMessage="";showLoginForm=!1;authError="";initFormControl(){this.email=new U("",[S.required,S.email]),this.password=new U("",[S.required,S.minLength(3)])}createForm(){this.myForm=new ue({email:this.email,password:this.password})}ngOnInit(){this.sellerService.reLoadSeller()}onSubmit(){return $(this,null,function*(){if(this.myForm.valid){let{email:t,password:e}=this.myForm.value,a=yield this.sellerService.logIn({email:t,password:e});if(a.length===1){localStorage.setItem("admin",JSON.stringify(a[0])),this.router.navigate(["/admin/dashboard"]);return}let m=yield this.userService.logIn({email:t,password:e});if(m.length===1){let v=m[0];localStorage.setItem("user",JSON.stringify(v));let q=JSON.parse(localStorage.getItem("cart_guest")||"[]");this.cartService.getUserCart(v.id).subscribe(Ee=>{if(Ee.length){let Te=Ee[0],se=[...Te.items];q.forEach(ke=>{let Pe=se.find(et=>et.id===ke.id);Pe?Pe.quantity+=ke.quantity:se.push(ke)}),localStorage.setItem(`cart_${v.id}`,JSON.stringify(se)),this.cartService.updateCart(Te.id,se).subscribe(),localStorage.removeItem("cart_guest")}else q.length>0?this.cartService.createCart(v.id,q).subscribe(()=>{localStorage.setItem(`cart_${v.id}`,JSON.stringify(q)),localStorage.removeItem("cart_guest")}):this.cartService.createCart(v.id,[]).subscribe()}),this.router.navigate(["/home"]);return}this.showToastMessage("\u274C Invalid email or password")}})}showToastMessage(t){this.toastMessage=t,this.showToast=!0,setTimeout(()=>{this.showToast=!1},4e3)}hideToast(){this.showToast=!1}get formError(){return this.myForm.get("email")?.touched&&this.myForm.get("email")?.invalid||this.myForm.get("password")?.touched&&this.myForm.get("password")?.invalid}static \u0275fac=function(e){return new(e||n)(l(re),l(O),l(V),l(k))};static \u0275cmp=b({type:n,selectors:[["app-login-form"]],decls:28,vars:10,consts:[["data-aos","fade-up","id","contact",1,"contact"],[1,"container","my-5","d-flex","justify-content-center"],[1,"card","p-4","shadow-lg","rounded-3",2,"max-width","600px","width","100%"],[1,"text-center","mb-4","fw-bold","fs-4"],[1,"fs-5","p-2",3,"formGroup"],[1,"mb-3"],["for","email",1,"form-label","fw-semibold"],["type","email","id","email","placeholder","you@example.com","required","","formControlName","email",1,"form-control","form-control-lg"],[4,"ngIf"],["for","password",1,"form-label","fw-semibold"],["type","password","id","password","placeholder","Please Enter Your Password","required","","formControlName","password",1,"form-control","form-control-lg"],[1,"d-grid"],["role","alert",1,"alert","alert-danger"],["type","submit",1,"btn","btn-primary","btn-lg","fw-semibold",3,"click","disabled"],["routerLink","/signup-auth",1,"to-signup"],["class","text-center my-3",4,"ngIf"],[1,"toast-container","position-fixed","bottom-0","center-0","p-3",2,"z-index","9999"],["role","alert",1,"toast","align-items-center","text-white","bg-danger","border-0","fs-3"],[1,"d-flex"],[1,"toast-body"],["type","button",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"],[1,"text-center","my-3"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(e,a){if(e&1&&(r(0,"section",0)(1,"div",1)(2,"div",2)(3,"h3",3),o(4,"Login"),i(),r(5,"form",4)(6,"div",5)(7,"label",6),o(8,"Your Email *"),i(),f(9,"input",7),i(),d(10,nt,3,0,"ng-container",8),r(11,"div",5)(12,"label",9),o(13,"Password *"),i(),f(14,"input",10),i(),r(15,"div",11),d(16,ot,2,0,"div",12),r(17,"button",13),p("click",function(){return a.onSubmit()}),o(18," Send "),i(),r(19,"a",14),o(20,"Already Have Account"),i()()()()(),d(21,at,4,0,"div",15),r(22,"div",16)(23,"div",17)(24,"div",18)(25,"div",19),o(26),i(),r(27,"button",20),p("click",function(){return a.hideToast()}),i()()()()()),e&2){let m;s(5),c("formGroup",a.myForm),s(5),c("ngIf",(m=a.myForm.get("email"))==null?null:m.hasError("emailTaken")),s(6),de(a.formError?16:-1),s(),c("disabled",a.myForm.invalid||a.myForm.pending),s(4),c("ngIf",a.isLoading),s(2),Y("show",a.showToast)("hide",!a.showToast),s(3),u(" ",a.toastMessage," ")}},dependencies:[te,K,Q,z,W,ee,Z,X,_,w,E],encapsulation:2})};var he=class n{constructor(t){this.http=t}checkEmailNotTaken(){return t=>{let e=t.value;if(!e)return Oe(null);let a=this.http.get(`http://localhost:3000/admin?email=${e}`),m=this.http.get(`http://localhost:3000/users?email=${e}`);return Ne([a,m]).pipe(De(([v,q])=>v.length>0||q.length>0?{emailTaken:!0}:null))}}static \u0275fac=function(e){return new(e||n)(T(P))};static \u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})};function mt(n,t){n&1&&(N(0),r(1,"div",14),o(2," This email is already taken. "),i(),M())}function ct(n,t){n&1&&(r(0,"div",14),o(1," Check Your Inputs All Field is Required "),i())}function lt(n,t){n&1&&(r(0,"div",23)(1,"div",24)(2,"span",25),o(3,"Sending..."),i()()())}var Ce=class n{constructor(t,e,a){this.sellerService=t;this.userService=e;this.emailValidator=a;this.initFormControl(),this.createForm()}myForm;name;email;password;submitted=!1;isLoading=!1;toastMessage="";showToast=!1;showLoginForm=!1;authError="";initFormControl(){this.name=new U("",[S.required,S.minLength(3)]),this.email=new U("",[S.required,S.email],[this.emailValidator.checkEmailNotTaken()]),this.password=new U("",[S.required,S.minLength(3)])}createForm(){this.myForm=new ue({name:this.name,email:this.email,password:this.password})}ngOnInit(){this.sellerService.reLoadSeller()}onSubmit(){this.myForm.valid?this.userService.signUp(this.myForm.value,this.showToastMessage.bind(this)):this.showToastMessage("\u26A0\uFE0F Please fill all required fields.")}showToastMessage(t){this.toastMessage=t,this.showToast=!0,setTimeout(()=>{this.showToast=!1},4e3)}hideToast(){this.showToast=!1}get formError(){return this.myForm.get("password")?.hasError("required")&&this.myForm.get("password")?.touched||this.myForm.get("password")?.hasError("minlength")&&this.myForm.get("password")?.touched||this.myForm.get("name")?.hasError("required")&&this.myForm.get("name")?.touched}static \u0275fac=function(e){return new(e||n)(l(re),l(V),l(he))};static \u0275cmp=b({type:n,selectors:[["app-signup-form"]],decls:32,vars:10,consts:[["data-aos","fade-up","id","contact",1,"contact"],[1,"container","my-5","d-flex","justify-content-center"],[1,"card","p-4","shadow-lg","rounded-4",2,"max-width","600px","width","100%"],[1,"text-center","mb-4","fw-bold","fs-4"],[1,"fs-5","-2",3,"formGroup"],[1,"mb-3"],["for","name",1,"form-label","fw-semibold"],["type","text","id","name","placeholder","Please Enter Your Name","required","","formControlName","name",1,"form-control","form-control-lg"],["for","email",1,"form-label","fw-semibold"],["type","email","id","email","placeholder","you@example.com","required","","formControlName","email",1,"form-control","form-control-lg"],[4,"ngIf"],["for","password",1,"form-label","fw-semibold"],["type","password","id","password","placeholder","Please Enter Your Password","required","","formControlName","password",1,"form-control","form-control-lg"],[1,"d-grid"],["role","alert",1,"alert","alert-danger"],["type","submit",1,"btn","btn-primary","btn-lg","fw-semibold",3,"click","disabled"],["routerLink","/login",1,"to-login"],["class","text-center my-3",4,"ngIf"],[1,"toast-container","position-fixed","bottom-0","start-50","translate-middle-x","p-3",2,"z-index","9999"],["role","alert",1,"toast","align-items-center","text-white","bg-danger","border-0","fs-5","show",2,"transition","opacity 0.4s ease-in-out"],[1,"d-flex"],[1,"toast-body"],["type","button",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"],[1,"text-center","my-3"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(e,a){if(e&1&&(r(0,"section",0)(1,"div",1)(2,"div",2)(3,"h3",3),o(4,"Sign-Up"),i(),r(5,"form",4)(6,"div",5)(7,"label",6),o(8,"Your Name *"),i(),f(9,"input",7),i(),r(10,"div",5)(11,"label",8),o(12,"Your Email *"),i(),f(13,"input",9),i(),d(14,mt,3,0,"ng-container",10),r(15,"div",5)(16,"label",11),o(17,"Password *"),i(),f(18,"input",12),i(),r(19,"div",13),d(20,ct,2,0,"div",14),r(21,"button",15),p("click",function(){return a.onSubmit()}),o(22," Send "),i(),r(23,"a",16),o(24,"Already Have Account"),i()()()()(),d(25,lt,4,0,"div",17),r(26,"div",18)(27,"div",19)(28,"div",20)(29,"div",21),o(30),i(),r(31,"button",22),p("click",function(){return a.hideToast()}),i()()()()()),e&2){let m;s(5),c("formGroup",a.myForm),s(9),c("ngIf",(m=a.myForm.get("email"))==null?null:m.hasError("emailTaken")),s(6),de(a.formError?20:-1),s(),c("disabled",a.myForm.invalid||a.myForm.pending),s(4),c("ngIf",a.isLoading),s(2),Y("show",a.showToast)("hide",!a.showToast),s(3),u(" ",a.toastMessage," ")}},dependencies:[te,K,Q,z,W,ee,Z,X,_,w,E],encapsulation:2})};var ae=class n{constructor(t){this.router=t}canActivate(t,e){return localStorage.getItem("admin")?(this.router.navigate(["/admin/dashboard"]),!1):!0}static \u0275fac=function(e){return new(e||n)(T(O))};static \u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})};function dt(n,t){if(n&1){let e=y();r(0,"button",14),p("click",function(){h(e);let m=g(2);return C(m.addToCart())}),o(1," Add To Cart "),i()}}function pt(n,t){if(n&1){let e=y();r(0,"button",15),p("click",function(){h(e);let m=g(2);return C(m.removeFromCart(m.product.id))}),o(1," Remove From Cart "),i()}}function ut(n,t){n&1&&(N(0,16),o(1," \u{1F512} You must log in to proceed with checkout. "),M())}function ft(n,t){if(n&1){let e=y();r(0,"div",1)(1,"div",2)(2,"div",3),f(3,"img",4),i(),r(4,"div",3)(5,"h2"),o(6),i(),r(7,"p",5),o(8),i(),r(9,"p"),o(10),i(),r(11,"h4",6),o(12),A(13,"currency"),i(),r(14,"div",7)(15,"button",8),p("click",function(){h(e);let m=g();return C(m.decreaseQty())}),o(16,"-"),i(),r(17,"span",9),o(18),i(),r(19,"button",8),p("click",function(){h(e);let m=g();return C(m.increaseQty())}),o(20,"+"),i()(),d(21,dt,2,0,"button",10)(22,pt,2,0,"button",11),r(23,"button",12),p("click",function(){h(e);let m=g();return C(m.proceedToCheckout())}),o(24," CheckOut "),i(),d(25,ut,2,0,"ng-container",13),i()()()}if(n&2){let e=g();s(3),pe("alt",e.product.productName),c("src",e.product.img,G),s(3),x(e.product.productName),s(2),x(e.product.category),s(2),x(e.product.description),s(2),u(" ",H(13,11,e.product.productPrice," EGP")," "),s(6),x(e.quantity),s(3),c("ngIf",e.removeItemCart),s(),c("ngIf",!e.removeItemCart),s(),c("disabled",!e.isUserLoggedIn),s(2),c("ngIf",!e.isUserLoggedIn)}}var be=class n{constructor(t,e,a,m){this.route=t;this.productService=e;this.cartService=a;this.userService=m}product;quantity=1;removeItemCart=!0;isUserLoggedIn=!1;ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&this.productService.getProductById(t).subscribe(e=>{this.product=e,this.checkIfInCart()}),this.isUserLoggedIn=!!localStorage.getItem("user")}increaseQty(){this.quantity++}decreaseQty(){this.quantity>1&&this.quantity--}addToCart(){this.cartService.addToCart(this.product,this.quantity),this.removeItemCart=!1}checkIfInCart(){let t=this.cartService.getCart();this.removeItemCart=!t.some(e=>e.id===this.product.id)}removeFromCart(t){this.cartService.removeFromCart(this.product.id),this.removeItemCart=!0}proceedToCheckout(){this.userService.proceedToCheckout()}static \u0275fac=function(e){return new(e||n)(l(Ye),l(B),l(k),l(V))};static \u0275cmp=b({type:n,selectors:[["app-product-details"]],decls:1,vars:1,consts:[["class","container my-5",4,"ngIf"],[1,"container","my-5"],[1,"row"],[1,"col-md-6"],[1,"img-fluid","rounded",3,"src","alt"],[1,"text-muted"],[1,"text-success","fw-bold"],[1,"d-flex","align-items-center","my-3"],[1,"btn","btn-outline-dark",3,"click"],[1,"mx-3","fs-5"],["class","btn btn-primary btn-lg",3,"click",4,"ngIf"],["class","btn btn-outline-primary btn-lg",3,"click",4,"ngIf"],["routerLink","/checkout",1,"btn","btn-outline-success","btn-lg","mx-2",3,"click","disabled"],["class","text-danger mt-2",4,"ngIf"],[1,"btn","btn-primary","btn-lg",3,"click"],[1,"btn","btn-outline-primary","btn-lg",3,"click"],[1,"text-danger","mt-2"]],template:function(e,a){e&1&&d(0,ft,26,14,"div",0),e&2&&c("ngIf",a.product)},dependencies:[_,w,J,E],styles:["img[_ngcontent-%COMP%]{max-height:400px;object-fit:cover}"]})};function gt(n,t){if(n&1){let e=y();N(0),r(1,"button",6),p("click",function(){h(e);let m=g();return C(m.goToShop())}),o(2,"Start Shopping \u{1F6CD}\uFE0F"),i(),M()}}var Se=class n{constructor(t){this.router=t}userName="Guest";isAdmin=!1;ngOnInit(){let t=localStorage.getItem("user"),e=localStorage.getItem("admin");if(t){let a=JSON.parse(t);this.userName=a.name||"User"}else if(e){let a=JSON.parse(e);this.userName=a.name||"Admin",this.isAdmin=!0}}goToShop(){this.router.navigate(["/home"])}static \u0275fac=function(e){return new(e||n)(l(O))};static \u0275cmp=b({type:n,selectors:[["app-welcome"]],decls:9,vars:2,consts:[[1,"welcome-container","text-center"],[1,"icon-angular",2,"cursor","pointer","font-size","100px"],[1,"subtitle"],[4,"ngIf"],[1,"bg-circle","circle1"],[1,"bg-circle","circle2"],[1,"shop-btn",3,"click"]],template:function(e,a){e&1&&(r(0,"div",0),f(1,"i",1),r(2,"h1"),o(3),i(),r(4,"p",2),o(5,"We're so glad you're here."),i(),d(6,gt,3,0,"ng-container",3),f(7,"div",4)(8,"div",5),i()),e&2&&(s(3),u("\u{1F44B} Welcome, ",a.userName,"!"),s(3),c("ngIf",!a.isAdmin))},dependencies:[_,w],styles:[".welcome-container[_ngcontent-%COMP%]{position:relative;height:100vh;background:linear-gradient(135deg,#fceabb,#f8b500);display:flex;flex-direction:column;justify-content:center;align-items:center;color:#2d2d2d;text-align:center;overflow:hidden}h1[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;animation:_ngcontent-%COMP%_fadeInDown 1s ease-out}.subtitle[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:2rem;animation:_ngcontent-%COMP%_fadeInUp 1s ease-out}.shop-btn[_ngcontent-%COMP%]{padding:12px 24px;font-size:1.2rem;background-color:#2d2d2d;color:#fff;border:none;border-radius:8px;transition:transform .3s ease;cursor:pointer}.shop-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.bg-circle[_ngcontent-%COMP%]{position:absolute;border-radius:80%;opacity:.3;animation:_ngcontent-%COMP%_float 6s infinite ease-in-out}.circle1[_ngcontent-%COMP%]{width:400px;height:400px;background:#fff;top:-100px;left:-100px}.circle2[_ngcontent-%COMP%]{width:300px;height:300px;background:#2d2d2d;bottom:-80px;right:-80px}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-40px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(40px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-30px)}}"]})};function vt(n,t){if(n&1){let e=y();r(0,"tr")(1,"td"),o(2),i(),r(3,"td")(4,"button",7),p("click",function(){let m=h(e).$implicit,v=g(2);return C(v.decreaseQty(m))}),o(5,"\u2212"),i(),o(6),r(7,"button",7),p("click",function(){let m=h(e).$implicit,v=g(2);return C(v.increaseQty(m))}),o(8,"+"),i()(),r(9,"td"),o(10),i(),r(11,"td"),o(12),i(),r(13,"td")(14,"button",8),p("click",function(){let m=h(e).$implicit,v=g(2);return C(v.removeItem(m.id))}),o(15," \u{1F5D1} "),i()()()}if(n&2){let e=t.$implicit;s(2),x(e.productName),s(4),u(" ",e.quantity," "),s(4),u("",e.productPrice," EGP"),s(2),u("",e.productPrice*e.quantity," EGP")}}function ht(n,t){n&1&&(N(0,9),o(1," \u{1F512} You must log in to proceed with checkout. "),M())}function Ct(n,t){if(n&1){let e=y();r(0,"div")(1,"table",3)(2,"thead")(3,"tr")(4,"th"),o(5,"Product"),i(),r(6,"th"),o(7,"Qty"),i(),r(8,"th"),o(9,"Price"),i(),r(10,"th"),o(11,"Total"),i(),f(12,"th"),i()(),r(13,"tbody"),d(14,vt,16,4,"tr",4),i()(),r(15,"h4"),o(16),i(),r(17,"button",5),p("click",function(){h(e);let m=g();return C(m.proceedToCheckout())}),o(18," Proceed to Checkout "),i(),d(19,ht,2,0,"ng-container",6),i()}if(n&2){let e=g();s(14),c("ngForOf",e.cart),s(2),u("Total: ",e.total," EGP"),s(),c("disabled",!e.isUserLoggedIn),s(2),c("ngIf",!e.isUserLoggedIn)}}function bt(n,t){n&1&&(r(0,"p"),o(1,"Your cart is empty \u{1F4A4}"),i())}var _e=class n{constructor(t,e){this.cartService=t;this.userService=e}cart=[];isUserLoggedIn=!1;ngOnInit(){this.loadCart(),this.cartService.cartChanged.subscribe(()=>this.loadCart()),this.isUserLoggedIn=!!localStorage.getItem("user")}loadCart(){this.cart=this.cartService.getCart()}increaseQty(t){this.cartService.addToCart(t,1)}decreaseQty(t){this.cartService.updateQuantity(t.id,t.quantity-1)}removeItem(t){this.cartService.removeFromCart(t)}get total(){return this.cart.reduce((t,e)=>t+e.productPrice*e.quantity,0)}proceedToCheckout(){this.userService.proceedToCheckout()}static \u0275fac=function(e){return new(e||n)(l(k),l(V))};static \u0275cmp=b({type:n,selectors:[["app-cart"]],decls:6,vars:2,consts:[["emptyCart",""],[1,"container","my-5"],[4,"ngIf","ngIfElse"],[1,"table"],[4,"ngFor","ngForOf"],["routerLink","/checkout",1,"btn","btn-outline-success",3,"click","disabled"],["class","text-danger mt-2",4,"ngIf"],[3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"text-danger","mt-2"]],template:function(e,a){if(e&1&&(r(0,"div",1)(1,"h2"),o(2,"Your Cart \u{1F6D2}"),i(),d(3,Ct,20,4,"div",2)(4,bt,2,0,"ng-template",null,0,je),i()),e&2){let m=Ve(5);s(3),c("ngIf",a.cart.length>0)("ngIfElse",m)}},dependencies:[_,L,w,E],encapsulation:2})};function St(n,t){if(n&1&&(r(0,"div")(1,"p"),o(2),i()()),n&2){let e=t.$implicit;s(2),Ae(" ",e.productName," (",e.quantity,") - ",e.productPrice," EGP ")}}var xe=class n{constructor(t,e,a){this.fb=t;this.http=e;this.cartService=a}checkoutForm;cart=[];total=0;ngOnInit(){let t=JSON.parse(localStorage.getItem("user")||"{}"),e=t.id?`cart_${t.id}`:"cart_guest";this.cart=JSON.parse(localStorage.getItem(e)||"[]"),this.total=this.cart.reduce((a,m)=>a+m.productPrice*m.quantity,0),this.checkoutForm=this.fb.group({name:["",S.required],address:["",S.required],phone:["",[S.required,S.pattern("^\\+?[0-9]{10,15}$"),S.minLength(10),S.maxLength(15)]]})}onCheckout(){let t=JSON.parse(localStorage.getItem("user")||"{}"),e=t.id?`cart_${t.id}`:"cart_guest",a=ce(me({},this.checkoutForm.value),{userId:t?.id||"guest",items:this.cart,total:this.total,date:new Date});this.http.post(`${I.baseUrl}/orders`,a).subscribe({next:()=>{localStorage.setItem(e,a),alert("\u2705 Order saved to server!"),this.checkoutForm.reset(),this.cart=[]},error:()=>{alert("\u274C Failed to save order. Try again.")}})}static \u0275fac=function(e){return new(e||n)(l(Qe),l(P),l(k))};static \u0275cmp=b({type:n,selectors:[["app-check-out"]],decls:23,vars:4,consts:[[1,"container","my-5"],[1,"mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["formControlName","name","required","",1,"form-control"],["formControlName","address","required","",1,"form-control"],["formControlName","phone","required","",1,"form-control"],[1,"mt-4"],[4,"ngFor","ngForOf"],[1,"fw-bold"],["type","submit",1,"btn","btn-success",3,"disabled"]],template:function(e,a){e&1&&(r(0,"div",0)(1,"h2",1),o(2,"Checkout"),i(),r(3,"form",2),p("ngSubmit",function(){return a.onCheckout()}),r(4,"div",3)(5,"label"),o(6,"Name"),i(),f(7,"input",4),i(),r(8,"div",3)(9,"label"),o(10,"Address"),i(),f(11,"input",5),i(),r(12,"div",3)(13,"label"),o(14,"Phone"),i(),f(15,"input",6),i(),r(16,"h4",7),o(17,"Your Cart"),i(),d(18,St,3,3,"div",8),r(19,"p",9),o(20),i(),r(21,"button",10),o(22," Place Order "),i()()()),e&2&&(s(3),c("formGroup",a.checkoutForm),s(15),c("ngForOf",a.cart),s(2),u("Total: ",a.total," EGP"),s(),c("disabled",a.checkoutForm.invalid))},dependencies:[te,K,Q,z,W,ee,Z,X,_,L],encapsulation:2})};function _t(n,t){n&1&&(r(0,"div",4)(1,"p"),o(2,"You haven't placed any orders yet."),i(),r(3,"a",5),o(4,"Start Shopping"),i()())}function xt(n,t){if(n&1&&(r(0,"tr")(1,"td"),f(2,"img",18),i(),r(3,"td"),o(4),i(),r(5,"td"),o(6),i(),r(7,"td"),o(8),i(),r(9,"td"),o(10),A(11,"currency"),i(),r(12,"td"),o(13),A(14,"currency"),i()()),n&2){let e=t.$implicit;s(2),c("src",e.img,G),s(2),x(e.productName),s(2),x(e.category),s(2),x(e.quantity),s(2),x(H(11,6,e.productPrice,"EGP")),s(3),u(" ",H(14,9,e.productPrice*e.quantity,"EGP")," ")}}function yt(n,t){if(n&1){let e=y();r(0,"div",6)(1,"div",7)(2,"div")(3,"strong"),o(4,"Order ID:"),i(),o(5),i(),r(6,"span",8),o(7),i()(),r(8,"div",9)(9,"p")(10,"strong"),o(11,"Date:"),i(),o(12),A(13,"date"),i(),r(14,"p")(15,"strong"),o(16,"Shipping Address:"),i(),o(17),i(),r(18,"p")(19,"strong"),o(20,"Phone:"),i(),o(21),i(),r(22,"div",10)(23,"table",11)(24,"thead",12)(25,"tr")(26,"th"),o(27,"Image"),i(),r(28,"th"),o(29,"Product"),i(),r(30,"th"),o(31,"Category"),i(),r(32,"th"),o(33,"Qty"),i(),r(34,"th"),o(35,"Price"),i(),r(36,"th"),o(37,"Total"),i()()(),r(38,"tbody"),d(39,xt,15,12,"tr",13),i()()(),r(40,"div",14),o(41," Total: "),r(42,"span",15),o(43),A(44,"currency"),i()(),r(45,"div",16)(46,"button",17),p("click",function(){let m=h(e).$implicit,v=g();return C(v.deleteOrder(m.id))}),o(47," Cancel Order "),i()()()()}if(n&2){let e=t.$implicit;s(5),u(" ",e.id,""),s(2),x(e.status),s(5),u(" ",H(13,8,e.date,"medium"),""),s(5),u(" ",e.address,""),s(4),u(" ",e.phone,""),s(18),c("ngForOf",e.items),s(4),x(H(44,11,e.total,"EGP")),s(3),c("disabled",e.status==="shipped"||e.status==="delivered")}}var ye=class n{constructor(t){this.http=t}orders=[];userId="";ngOnInit(){let t=localStorage.getItem("user");if(t){let e=JSON.parse(t);this.userId=e.id,this.fetchOrders()}}fetchOrders(){this.http.get(`${I.baseUrl}/orders?userId=${this.userId}`).subscribe({next:t=>{this.orders=t.sort((e,a)=>new Date(a.date).getTime()-new Date(e.date).getTime())},error:t=>{console.error("Error fetching orders:",t)}})}deleteOrder(t){this.http.delete(`${I.baseUrl}/orders/${t}`).subscribe({next:()=>{this.orders=this.orders.filter(e=>e.id!==t),alert("\u274C Order cancelled successfully.")},error:()=>{alert("\u26A0\uFE0F Failed to cancel order.")}})}formatDate(t){let e=new Date(t);return e.toLocaleDateString()+" "+e.toLocaleTimeString()}getStatusStyle(t){switch(t){case"pending":return"badge bg-warning text-dark";case"shipped":return"badge bg-primary";case"delivered":return"badge bg-success";case"canceled":return"badge bg-danger";default:return"badge bg-secondary"}}static \u0275fac=function(e){return new(e||n)(l(P))};static \u0275cmp=b({type:n,selectors:[["app-order-history"]],decls:5,vars:2,consts:[[1,"order-history","container","my-5"],[1,"text-center","mb-4"],["class","text-center alert alert-info",4,"ngIf"],["class","card mb-4 shadow-sm",4,"ngFor","ngForOf"],[1,"text-center","alert","alert-info"],["routerLink","/home",1,"btn","btn-primary","mt-2"],[1,"card","mb-4","shadow-sm"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"badge","bg-warning","text-dark","text-uppercase"],[1,"card-body"],[1,"table-responsive"],[1,"table"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"text-end","fw-bold","fs-5"],[1,"text-success"],[1,"text-start","fw-bold","fs-5"],[1,"btn","btn-outline-danger",3,"click","disabled"],["width","60",1,"img-thumbnail","rounded",3,"src"]],template:function(e,a){e&1&&(r(0,"section",0)(1,"h2",1),o(2,"\u{1F9FE} Your Order History"),i(),d(3,_t,5,0,"div",2)(4,yt,48,14,"div",3),i()),e&2&&(s(3),c("ngIf",a.orders.length===0),s(),c("ngForOf",a.orders))},dependencies:[_,L,w,J,qe,E],encapsulation:2})};var Ze=[{path:"",component:Se},{path:"home",component:fe},{path:"cart",component:_e},{path:"order",component:ye},{path:"checkout",component:xe},{path:"signup-auth",component:Ce,canActivate:[ae]},{path:"login",component:ve,canActivate:[ae]},{path:"admin",loadChildren:()=>import("./chunk-MAZ2FROJ.js").then(n=>n.AdminModule)},{path:"product/:id",component:be},{path:"**",redirectTo:"signup-auth"}];var Xe={providers:[Be(Ze),Me(Ge)]};function It(n,t){if(n&1&&(r(0,"li"),o(1),i()),n&2){let e=t.$implicit;s(),Fe(" ",e.productName," x",e.quantity," ")}}function wt(n,t){if(n&1&&(r(0,"ul",10)(1,"li",11)(2,"a",12),o(3,"Home"),i()(),r(4,"li",11)(5,"a",13),o(6,"Sign-Up"),i()(),r(7,"li",11)(8,"a",14),o(9,"Log In"),i()(),r(10,"div",15)(11,"button",16),o(12),i(),r(13,"ul",17),d(14,It,2,2,"li",18),r(15,"li")(16,"a",19),o(17,"View Cart"),i()()()()()),n&2){let e=g();s(12),u(" Cart (",e.cartCount,") "),s(2),c("ngForOf",e.cart)}}function Et(n,t){if(n&1){let e=y();r(0,"ul",10)(1,"li",11)(2,"a",20),o(3,"Add Product"),i()(),r(4,"li",11)(5,"a",21),o(6,"Dashboard"),i()(),r(7,"li",11)(8,"a",22),o(9,"Orders"),i()(),r(10,"li",11)(11,"a",23),p("click",function(){h(e);let m=g();return C(m.logOut())}),o(12,"Log Out"),i()()()}}function kt(n,t){if(n&1&&(r(0,"li"),o(1),i()),n&2){let e=t.$implicit;s(),Fe(" ",e.productName," x",e.quantity," ")}}function Ft(n,t){if(n&1){let e=y();r(0,"ul",10)(1,"li",11)(2,"a",12),o(3,"Home"),i()(),r(4,"li",11)(5,"a",24),o(6,"Orders"),i()(),r(7,"div",15)(8,"button",25),o(9),i(),r(10,"ul",17),d(11,kt,2,2,"li",18),r(12,"li")(13,"a",19),o(14,"View Cart"),i()()()(),r(15,"li",11)(16,"a",26),p("click",function(){h(e);let m=g();return C(m.logOut())}),o(17,"Log Out"),i()()()}if(n&2){let e=g();s(9),u(" Cart (",e.cartCount,") "),s(2),c("ngForOf",e.cart)}}var Ie=class n{constructor(t,e,a){this.route=t;this.search=e;this.cartService=a}menuType="default";adminName="";cart=[];cartCount=0;ngOnInit(){this.route.events.subscribe(t=>{t.url&&this.setMenuType()}),this.setMenuType(),this.updateCartCount(),this.loadCart(),this.cartService.cartChanged.subscribe(()=>this.loadCart())}setMenuType(){localStorage.getItem("admin")?this.menuType="admin":localStorage.getItem("user")?this.menuType="user":this.menuType="default",console.log(this.menuType)}logOut(){localStorage.removeItem("admin"),localStorage.removeItem("user"),this.route.navigate([""])}isAdminRoute(t){return localStorage.getItem("admin")!==null&&t.startsWith("/admin")}products=[];searchProduct(t){let e=t.target.value.trim();this.search.searchProduct(e)}updateCartCount(){let t=this.cartService.getCart();this.cartCount=t.reduce((e,a)=>e+a.quantity,0)}loadCart(){this.cart=this.cartService.getCart(),this.cartCount=this.cart.reduce((t,e)=>t+e.quantity,0)}static \u0275fac=function(e){return new(e||n)(l(O),l(B),l(k))};static \u0275cmp=b({type:n,selectors:[["app-header"]],decls:14,vars:4,consts:[[1,"navbar","navbar-expand-lg","bg-body-tertiary"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse",3,"ngSwitch"],["class","navbar-nav me-auto mb-2 mb-lg-0",4,"ngSwitchCase"],["role","search",1,"d-flex"],["type","search","placeholder","Search","aria-label","Search",1,"form-control","me-2",3,"keyup"],["type","submit",1,"btn","btn-outline-success"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","/home",1,"nav-link"],["routerLink","/signup-auth",1,"nav-link"],["routerLink","/login",1,"nav-link"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-outline-dark","dropdown-toggle"],[1,"dropdown-menu"],[4,"ngFor","ngForOf"],["routerLink","/cart",1,"dropdown-item"],["routerLink","admin/add-product",1,"nav-link"],["routerLink","/dashboard",1,"nav-link"],["routerLink","admin/orders",1,"nav-link"],[1,"nav-link",2,"cursor","pointer",3,"click"],["routerLink","/order",1,"nav-link"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-secondary","dropdown-toggle"],["routerLink","",1,"nav-link",2,"cursor","pointer",3,"click"]],template:function(e,a){e&1&&(r(0,"nav",0)(1,"div",1)(2,"a",2),o(3,"E-Commerce"),i(),r(4,"button",3),f(5,"span",4),i(),r(6,"div",5),d(7,wt,18,2,"ul",6)(8,Et,13,0,"ul",6)(9,Ft,18,2,"ul",6),r(10,"form",7)(11,"input",8),p("keyup",function(v){return a.searchProduct(v)}),i(),r(12,"button",9),o(13,"Search"),i()()()()()),e&2&&(s(6),c("ngSwitch",a.menuType),s(),c("ngSwitchCase","default"),s(),c("ngSwitchCase","admin"),s(),c("ngSwitchCase","user"))},dependencies:[E,_,L,Re,Ue],styles:[".dropdown-menu[_ngcontent-%COMP%]{padding:10px}.dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px;border:1px solid #ccc;border-radius:5px;margin-bottom:5px;background-color:#f9f9f9}"]})};var we=class n{title="e-commerce";static \u0275fac=function(e){return new(e||n)};static \u0275cmp=b({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container"]],template:function(e,a){e&1&&(r(0,"div",0),f(1,"app-header")(2,"router-outlet"),i())},dependencies:[Ie,Je],encapsulation:2})};$e(we,Xe).catch(n=>console.error(n));
